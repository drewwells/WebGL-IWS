function i(a){throw a;}var j=true,l=null,r=false;function aa(a){return function(){return a}}var s,t=this;function u(){}
function ba(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array||!(a instanceof Object)&&Object.prototype.toString.call(a)=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(!(a instanceof Object)&&(Object.prototype.toString.call(a)=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call")))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function v(a){return a===l}function w(a){return ba(a)=="array"}function ca(a){var b=ba(a);return b=="array"||b=="object"&&typeof a.length=="number"}function x(a){return typeof a=="string"}function y(a){return typeof a=="number"}function da(a){return ba(a)=="function"}function ea(a){a=ba(a);return a=="object"||a=="array"||a=="function"}function z(a){return a[fa]||(a[fa]=++ga)}
var fa="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ga=0;function ha(a){return a.call.apply(a.bind,arguments)}function ia(a,b){var c=b||t;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(c,e)}}else return function(){return a.apply(c,arguments)}}
function A(){A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ha:ia;return A.apply(l,arguments)}var B=Date.now||function(){return+new Date};function C(a,b){var c=a.split("."),d=t;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)if(!c.length&&b!==undefined)d[e]=b;else d=d[e]?d[e]:d[e]={}}function D(a,b){function c(){}c.prototype=b.prototype;a.J=b.prototype;a.prototype=new c};function E(){}E.prototype.ab=r;E.prototype.C=function(){if(!this.ab){this.ab=j;this.f()}};E.prototype.f=function(){};function ja(a,b,c,d){this.zoom=a||0;this.x=b||0;this.y=c||0;this.e=d||0;this.S=l;this.state=ka}D(ja,E);function la(a){return a.zoom+"_"+a.x+"_"+a.y}ja.prototype.f=function(){delete this.S};var ka=0;function ma(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function na(a){for(var b in a)return r;return j}var oa=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function pa(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<oa.length;e++){b=oa[e];if(Object.prototype.hasOwnProperty.call(c,b))a[b]=c[b]}}};function qa(a){if(!ra.test(a))return a;if(a.indexOf("&")!=-1)a=a.replace(sa,"&amp;");if(a.indexOf("<")!=-1)a=a.replace(ta,"&lt;");if(a.indexOf(">")!=-1)a=a.replace(ua,"&gt;");if(a.indexOf('"')!=-1)a=a.replace(va,"&quot;");return a}var sa=/&/g,ta=/</g,ua=/>/g,va=/\"/g,ra=/[&<>\"]/;
function wa(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var h=d[g]||"",m=e[g]||"",k=RegExp("(\\d*)(\\D*)","g"),p=RegExp("(\\d*)(\\D*)","g");do{var n=k.exec(h)||["","",""],o=p.exec(m)||["","",""];if(n[0].length==0&&o[0].length==0)break;c=xa(n[1].length==0?0:parseInt(n[1],10),o[1].length==0?0:parseInt(o[1],10))||xa(n[2].length==0,o[2].length==0)||xa(n[2],o[2])}while(c==
0)}return c}function xa(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};var F=Array.prototype,ya=F.indexOf?function(a,b,c){return F.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:c<0?Math.max(0,a.length+c):c;if(x(a)){if(!x(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=F.forEach?function(a,b,c){F.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Aa=F.filter?function(a,b,c){return F.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],
f=0,g=x(a)?a.split(""):a,h=0;h<d;h++)if(h in g){var m=g[h];if(b.call(c,m,h,a))e[f++]=m}return e};function Ba(a,b){var c;a:{c=a.length;for(var d=x(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){c=e;break a}c=-1}return c<0?l:x(a)?a.charAt(c):a[c]}function Ca(a,b){var c=Da(a,b,void 0);return c<0?l:x(a)?a.charAt(c):a[c]}function Da(a,b,c){for(var d=x(a)?a.split(""):a,e=a.length-1;e>=0;e--)if(e in d&&b.call(c,d[e],e,a))return e;return-1}
function Ea(a,b){var c=ya(a,b);c>=0&&F.splice.call(a,c,1)}function Fa(){return F.concat.apply(F,arguments)}function Ga(a){if(w(a))return Fa(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}function Ha(a){F.splice.apply(a,Ia(arguments,1))}function Ia(a,b,c){return arguments.length<=2?F.slice.call(a,b):F.slice.call(a,b,c)}function Ja(a,b){F.sort.call(a,b||Ka)}function Ka(a,b){return a>b?1:a<b?-1:0}
function La(a,b,c){var d;c=c||Ka;for(var e=0,f=a.length;e<f;){var g=e+f>>1,h;h=c(b,a[g]);if(h>0)e=g+1;else{f=g;d=!h}}d=d?e:~e;d<0&&Ha(a,-(d+1),0,b)}function Ma(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b];w(c)?a.push.apply(a,Ma.apply(l,c)):a.push(c)}return a};function Na(a){this.D={};this.g=[];var b=arguments.length;if(b>1){b%2&&i(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.fa(arguments[c],arguments[c+1])}else if(a){var d;if(a instanceof Na){Oa(a);d=a.g.concat();c=Pa(a)}else{b=[];var e=0;for(d in a)b[e++]=d;d=b;b=[];e=0;for(c in a)b[e++]=a[c];c=b}for(b=0;b<d.length;b++)this.fa(d[b],c[b])}}s=Na.prototype;s.d=0;s.Ta=0;function Pa(a){Oa(a);for(var b=[],c=0;c<a.g.length;c++)b.push(a.D[a.g[c]]);return b}
s.clear=function(){this.D={};this.Ta=this.d=this.g.length=0};s.remove=function(a){if(Object.prototype.hasOwnProperty.call(this.D,a)){delete this.D[a];this.d--;this.Ta++;this.g.length>2*this.d&&Oa(this);return j}return r};
function Oa(a){if(a.d!=a.g.length){for(var b=0,c=0;b<a.g.length;){var d=a.g[b];if(Object.prototype.hasOwnProperty.call(a.D,d))a.g[c++]=d;b++}a.g.length=c}if(a.d!=a.g.length){var e={};for(c=b=0;b<a.g.length;){d=a.g[b];if(!Object.prototype.hasOwnProperty.call(e,d)){a.g[c++]=d;e[d]=1}b++}a.g.length=c}}function Qa(a,b){if(Object.prototype.hasOwnProperty.call(a.D,b))return a.D[b]}s.fa=function(a,b){if(!Object.prototype.hasOwnProperty.call(this.D,a)){this.d++;this.g.push(a);this.Ta++}this.D[a]=b};function Ra(a){this.name=a}s=Ra.prototype;s.ta=aa(0);s.wb=u;s.ba=0;s.Ma=function(a){a.S=new Image;a.S.onload=function(b){return function(){a.state=20;b.ba--;b.wb(a)}}(this);a.S.onerror=function(b){return function(){a.state=-10;b.ba--}}(this);a.state=10;a.S.src=this.ua(a.zoom,a.x,a.y);this.ba++;return j};s.oa=function(){};s.Ga=aa(l);s.Ya=u;function Sa(a){this.F=new Na;this.r=[];this.Zb=1024;this.Xa=new G(2E4);H(this.Xa,Ta,this.Db,r,this);this.Xa.start();Ua(this,a)}function Ua(a,b){a.xb=B();a.A=b;a.A.wb=A(a.cc,a);a.F.clear();a.r=[]}s=Sa.prototype;s.A=l;s.xb=0;s.vb=u;s.Db=function(){var a=Aa(Pa(this.F),function(c){return c.state==20||c.state==ka||c.state==-10});for(Ja(a,function(c,d){return c.e-d.e});this.F.d>this.Zb&&a.length>0;){var b=a.shift();b.state==ka&&Ea(this.r,b);this.F.remove(la(b));b.C()}};
s.cc=function(a){if(a.e<this.xb)a.state=-10;else this.vb(a)};function Va(a,b){Ja(a.r,function(f,g){return f.e-g.e});for(var c=Math.min(a.r.length,b-a.A.ba),d=0;d<c;d++){var e=a.r.pop();a.A.Ma(e)||a.r.push(e)}};function Wa(a,b,c,d){this.gb=b.c;this.p=[];this.Z=c;this.ya=d;this.A=a;this.ja=this.A.R();this.K=new Sa(a);this.K.vb=A(this.Pa,this);Xa(this)}s=Wa.prototype;s.qa=function(a){this.A=a;Ua(this.K,a);this.ja=this.A.R();this.p=[];Xa(this)};
function Xa(a){var b=a.gb;a.P&&b.deleteTexture(a.P);a.P=b.createTexture();b.bindTexture(b.TEXTURE_2D,a.P);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,j);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,a.Z*a.ja,a.ya*a.ja,0,b.RGBA,b.UNSIGNED_BYTE,l);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);a.ca=[];a.ga=[];for(b=0;b<a.Z;++b)for(var c=
0;c<a.ya;++c){a.ca.push([-1,0,0,c*a.Z+b]);a.ga.push(new Ya(b,c))}}s.P=l;s.ca=l;s.ga=l;function Za(a,b){return Ca(a.ga,function(c){return!v(c.m)&&la(c.m)==b})}function $a(a,b){return Da(a.p,function(c){return la(c)==b})}
function I(a,b,c,d,e,f){if(!(b<a.A.ta()||b>a.A.sa())){var g=1<<b;c=ab(c,g);d=ab(d,g);g=b+"_"+c+"_"+d;var h=Za(a,g);if(v(h)){h=$a(a,g);if(h>=0){b=a.p[h];F.splice.call(a.p,h,1);b.e=e;a.Pa(b)}else if(f){a=Qa(a.K.F,g);if(a!=l)a.e=e}else{f=a.K;g=b+"_"+c+"_"+d;h=Qa(f.F,g);if(h!=l)h.e=e;else{h=new ja(b,c,d,e);f.F.fa(g,h);f.r.push(h)}e=h;e.state==20&&a.Pa(e)}}else h.m.e=e}}s.Pa=function(a){a.state=30;La(this.p,a,function(b,c){return b.e==c.e?b.zoom==c.zoom?b.x==c.x?b.y-c.y:b.x-c.x:b.zoom-c.zoom:b.e-c.e})};
function bb(a){for(var b=B()-500;a.p.length>0&&a.p[0].e<b;)a.p.shift().state=20;a=a.K;for(b=B()-500;a.r.length>0&&a.r[0].e<b;){var c=a.r.shift();a.F.remove(la(c));c.C()}}function cb(a){if(a.p.length>0)for(var b=Math.min(a.p.length,2),c=0;c<b;c++)db(a,a.p.pop());Ja(a.ca,function(d,e){return d[0]==e[0]?d[1]==e[1]?d[2]-e[2]:d[1]-e[1]:d[0]-e[0]});Va(a.K,12)}
function db(a,b){var c=a.gb;Ja(a.ga,function(f,g){return(v(f.m)?0:f.m.e)-(v(g.m)?0:g.m.e)});var d=a.ga[0];if(!v(d.m)&&d.m.e>b.e)b.state=20;else{c.bindTexture(c.TEXTURE_2D,a.P);c.texSubImage2D(c.TEXTURE_2D,0,d.x*a.ja,d.y*a.ja,c.RGBA,c.UNSIGNED_BYTE,b.S);var e=d.y*a.Z+d.x;c=Ba(a.ca,function(f){return f[3]==e});c[0]=b.zoom;c[1]=b.x;c[2]=b.y;if(!v(d.m))d.m.state=20;d.m=b;d.m.state=40}}function Ya(a,b){this.x=a;this.y=b}Ya.prototype.m=l;var J,eb,fb,gb,hb;function ib(){return t.navigator?t.navigator.userAgent:l}gb=fb=eb=J=r;var jb;if(jb=ib()){var kb=t.navigator;J=jb.indexOf("Opera")==0;eb=!J&&jb.indexOf("MSIE")!=-1;fb=!J&&jb.indexOf("WebKit")!=-1;gb=!J&&!fb&&kb.product=="Gecko"}var lb=J,K=eb,mb=gb,nb=fb,ob,pb=t.navigator;ob=pb&&pb.platform||"";hb=ob.indexOf("Mac")!=-1;var qb=ob.indexOf("Win")!=-1,rb;
a:{var sb="",tb;if(lb&&t.opera){var ub=t.opera.version;sb=typeof ub=="function"?ub():ub}else{if(mb)tb=/rv\:([^\);]+)(\)|;)/;else if(K)tb=/MSIE\s+([^\);]+)(\)|;)/;else if(nb)tb=/WebKit\/(\S+)/;if(tb){var vb=tb.exec(ib());sb=vb?vb[1]:""}}if(K){var wb,xb=t.document;wb=xb?xb.documentMode:undefined;if(wb>parseFloat(sb)){rb=String(wb);break a}}rb=sb}var yb={};function zb(a){return yb[a]||(yb[a]=wa(rb,a)>=0)};var Ab;var Bb=!K||zb("9"),Cb=K&&!zb("8");function L(a,b){this.type=a;this.currentTarget=this.target=b}D(L,E);L.prototype.f=function(){delete this.type;delete this.target;delete this.currentTarget};L.prototype.T=r;L.prototype.ea=j;L.prototype.preventDefault=function(){this.ea=r};var Db=new Function("a","return a");function M(a,b){a&&this.$(a,b)}D(M,L);var Eb=[1,4,2];s=M.prototype;s.target=l;s.relatedTarget=l;s.offsetX=0;s.offsetY=0;s.clientX=0;s.clientY=0;s.screenX=0;s.screenY=0;s.button=0;s.keyCode=0;s.charCode=0;s.ctrlKey=r;s.altKey=r;s.shiftKey=r;s.metaKey=r;s.Wb=r;s.Q=l;
s.$=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(mb)try{Db(d.nodeName)}catch(e){d=l}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==undefined?a.offsetX:a.layerX;this.offsetY=a.offsetY!==undefined?a.offsetY:a.layerY;this.clientX=a.clientX!==undefined?a.clientX:a.pageX;this.clientY=a.clientY!==undefined?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=
a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Wb=hb?a.metaKey:a.ctrlKey;this.state=a.state;this.Q=a;delete this.ea;delete this.T};function Fb(a,b){return Bb?a.Q.button==b:a.type=="click"?b==0:!!(a.Q.button&Eb[b])}
s.preventDefault=function(){M.J.preventDefault.call(this);var a=this.Q;if(a.preventDefault)a.preventDefault();else{a.returnValue=r;if(Cb)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}}};s.f=function(){M.J.f.call(this);this.relatedTarget=this.currentTarget=this.target=this.Q=l};function Gb(){}var Hb=0;s=Gb.prototype;s.key=0;s.U=r;s.Wa=r;s.$=function(a,b,c,d,e,f){if(da(a))this.ib=j;else if(a&&a.handleEvent&&da(a.handleEvent))this.ib=r;else i(Error("Invalid listener argument"));this.aa=a;this.rb=b;this.src=c;this.type=d;this.capture=!!e;this.Ha=f;this.Wa=r;this.key=++Hb;this.U=r};s.handleEvent=function(a){if(this.ib)return this.aa.call(this.Ha||this.src,a);return this.aa.handleEvent.call(this.aa,a)};var Ib;var Jb=(Ib="ScriptEngine"in t&&t.ScriptEngine()=="JScript")?t.ScriptEngineMajorVersion()+"."+t.ScriptEngineMinorVersion()+"."+t.ScriptEngineBuildVersion():"0";function N(a,b){this.kb=b;this.L=[];a>this.kb&&i(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.L.push(this.B?this.B():{})}D(N,E);N.prototype.B=l;N.prototype.$a=l;function Kb(a){if(a.L.length)return a.L.pop();return a.B?a.B():{}}function Lb(a,b){a.L.length<a.kb?a.L.push(b):Mb(a,b)}function Mb(a,b){if(a.$a)a.$a(b);else if(ea(b))if(da(b.C))b.C();else for(var c in b)delete b[c]}
N.prototype.f=function(){N.J.f.call(this);for(var a=this.L;a.length;)Mb(this,a.pop());delete this.L};var Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb;
(function(){function a(){return{d:0,s:0}}function b(){return[]}function c(){function o(q){return g.call(o.src,o.key,q)}return o}function d(){return new Gb}function e(){return new M}var f=Ib&&!(wa(Jb,"5.7")>=0),g;Sb=function(o){g=o};if(f){Nb=function(){return Kb(h)};Ob=function(o){Lb(h,o)};Pb=function(){return Kb(m)};Qb=function(o){Lb(m,o)};Rb=function(){return Kb(k)};Tb=function(){Lb(k,c())};Ub=function(){return Kb(p)};Vb=function(o){Lb(p,o)};Wb=function(){return Kb(n)};Xb=function(o){Lb(n,o)};var h=
new N(0,600);h.B=a;var m=new N(0,600);m.B=b;var k=new N(0,600);k.B=c;var p=new N(0,600);p.B=d;var n=new N(0,600);n.B=e}else{Nb=a;Ob=u;Pb=b;Qb=u;Rb=c;Tb=u;Ub=d;Vb=u;Wb=e;Xb=u}})();var Yb={},O={},P={},Zb={};
function H(a,b,c,d,e){if(b)if(w(b)){for(var f=0;f<b.length;f++)H(a,b[f],c,d,e);return l}else{d=!!d;var g=O;b in g||(g[b]=Nb());g=g[b];if(!(d in g)){g[d]=Nb();g.d++}g=g[d];var h=z(a),m;g.s++;if(g[h]){m=g[h];for(f=0;f<m.length;f++){g=m[f];if(g.aa==c&&g.Ha==e){if(g.U)break;return m[f].key}}}else{m=g[h]=Pb();g.d++}f=Rb();f.src=a;g=Ub();g.$(c,f,a,b,d,e);c=g.key;f.key=c;m.push(g);Yb[c]=g;P[h]||(P[h]=Pb());P[h].push(g);if(a.addEventListener){if(a==t||!a.Za)a.addEventListener(b,f,d)}else a.attachEvent($b(b),
f);return c}else i(Error("Invalid event type"))}function ac(a,b,c,d,e){if(w(b))for(var f=0;f<b.length;f++)ac(a,b[f],c,d,e);else{d=!!d;a:{f=O;if(b in f){f=f[b];if(d in f){f=f[d];a=z(a);if(f[a]){a=f[a];break a}}}a=l}if(a)for(f=0;f<a.length;f++)if(a[f].aa==c&&a[f].capture==d&&a[f].Ha==e){Q(a[f].key);break}}}
function Q(a){if(Yb[a]){var b=Yb[a];if(!b.U){var c=b.src,d=b.type,e=b.rb,f=b.capture;if(c.removeEventListener){if(c==t||!c.Za)c.removeEventListener(d,e,f)}else c.detachEvent&&c.detachEvent($b(d),e);c=z(c);e=O[d][f][c];if(P[c]){var g=P[c];Ea(g,b);g.length==0&&delete P[c]}b.U=j;e.ob=j;bc(d,f,c,e);delete Yb[a]}}}
function bc(a,b,c,d){if(!d.wa)if(d.ob){for(var e=0,f=0;e<d.length;e++)if(d[e].U){var g=d[e].rb;g.src=l;Tb(g);Vb(d[e])}else{if(e!=f)d[f]=d[e];f++}d.length=f;d.ob=r;if(f==0){Qb(d);delete O[a][b][c];O[a][b].d--;if(O[a][b].d==0){Ob(O[a][b]);delete O[a][b];O[a].d--}if(O[a].d==0){Ob(O[a]);delete O[a]}}}}
function cc(a){var b,c=0,d=b==l;b=!!b;if(a==l)ma(P,function(g){for(var h=g.length-1;h>=0;h--){var m=g[h];if(d||b==m.capture){Q(m.key);c++}}});else{a=z(a);if(P[a]){a=P[a];for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture){Q(f.key);c++}}}}}function $b(a){if(a in Zb)return Zb[a];return Zb[a]="on"+a}
function dc(a,b,c,d,e){var f=1;b=z(b);if(a[b]){a.s--;a=a[b];if(a.wa)a.wa++;else a.wa=1;try{for(var g=a.length,h=0;h<g;h++){var m=a[h];if(m&&!m.U)f&=ec(m,e)!==r}}finally{a.wa--;bc(c,d,b,a)}}return Boolean(f)}function ec(a,b){var c=a.handleEvent(b);a.Wa&&Q(a.key);return c}
Sb(function(a,b){if(!Yb[a])return j;var c=Yb[a],d=c.type,e=O;if(!(d in e))return j;e=e[d];var f,g;if(Ab===undefined)Ab=K&&!t.addEventListener;if(Ab){var h;if(!(h=b))a:{h="window.event".split(".");for(var m=t;f=h.shift();)if(m[f]!=l)m=m[f];else{h=l;break a}h=m}f=h;h=j in e;m=r in e;if(h){if(f.keyCode<0||f.returnValue!=undefined)return j;a:{var k=r;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(p){k=j}if(k||f.returnValue==undefined)f.returnValue=j}}k=Wb();k.$(f,this);f=j;try{if(h){for(var n=Pb(),o=
k.currentTarget;o;o=o.parentNode)n.push(o);g=e[j];g.s=g.d;for(var q=n.length-1;!k.T&&q>=0&&g.s;q--){k.currentTarget=n[q];f&=dc(g,n[q],d,j,k)}if(m){g=e[r];g.s=g.d;for(q=0;!k.T&&q<n.length&&g.s;q++){k.currentTarget=n[q];f&=dc(g,n[q],d,r,k)}}}else f=ec(c,k)}finally{if(n){n.length=0;Qb(n)}k.C();Xb(k)}return f}d=new M(b,this);try{f=ec(c,d)}finally{d.C()}return f});function fc(){}D(fc,E);s=fc.prototype;s.Za=j;s.Oa=l;s.addEventListener=function(a,b,c,d){H(this,a,b,c,d)};s.removeEventListener=function(a,b,c,d){ac(this,a,b,c,d)};
s.dispatchEvent=function(a){if(x(a))a=new L(a,this);else if(a instanceof L)a.target=a.target||this;else{var b=a;a=new L(a.type,this);pa(a,b)}b=1;var c,d=a.type,e=O;if(d in e){e=e[d];d=j in e;var f;if(d){c=[];for(f=this;f;f=f.Oa)c.push(f);f=e[j];f.s=f.d;for(var g=c.length-1;!a.T&&g>=0&&f.s;g--){a.currentTarget=c[g];b&=dc(f,c[g],a.type,j,a)&&a.ea!=r}}if(r in e){f=e[r];f.s=f.d;if(d)for(g=0;!a.T&&g<c.length&&f.s;g++){a.currentTarget=c[g];b&=dc(f,c[g],a.type,r,a)&&a.ea!=r}else for(c=this;!a.T&&c&&f.s;c=
c.Oa){a.currentTarget=c;b&=dc(f,c,a.type,r,a)&&a.ea!=r}}a=Boolean(b)}else a=j;return a};s.f=function(){fc.J.f.call(this);cc(this);this.Oa=l};function G(a,b){this.va=a||1;this.ka=b||gc;this.xa=A(this.$b,this);this.La=B()}D(G,fc);G.prototype.enabled=r;var gc=t.window;s=G.prototype;s.O=l;s.$b=function(){if(this.enabled){var a=B()-this.La;if(a>0&&a<this.va*0.8)this.O=this.ka.setTimeout(this.xa,this.va-a);else{this.dispatchEvent(Ta);if(this.enabled){this.O=this.ka.setTimeout(this.xa,this.va);this.La=B()}}}};s.start=function(){this.enabled=j;if(!this.O){this.O=this.ka.setTimeout(this.xa,this.va);this.La=B()}};
s.stop=function(){this.enabled=r;if(this.O){this.ka.clearTimeout(this.O);this.O=l}};s.f=function(){G.J.f.call(this);this.stop();delete this.ka};var Ta="tick";function hc(a,b,c,d){this.c=a.c;d=d?d:1;b*=d;c*=d;this.W=this.c.createBuffer();this.ia=this.c.createBuffer();this.c.bindBuffer(this.c.ARRAY_BUFFER,this.W);a=b*c*12;for(var e=new Float32Array(a*2),f=new Float32Array(a*2),g=0;g<c;++g)for(var h=0;h<b;++h){var m=function(k,p,n){k=(h*b+g)*6+k;e[k*2+0]=(h-b/2+p)/d;e[k*2+1]=(g-c/2+n)/d;f[k*2+0]=h%d/d+p/d;f[k*2+1]=g%d/d+n/d};m(0,1,1);m(1,0,1);m(2,1,0);m(3,0,1);m(4,0,0);m(5,1,0)}this.c.bufferData(this.c.ARRAY_BUFFER,e,this.c.STATIC_DRAW);this.W.Ia=2;this.W.pb=
a;this.c.bindBuffer(this.c.ARRAY_BUFFER,this.ia);this.c.bufferData(this.c.ARRAY_BUFFER,f,this.c.STATIC_DRAW);this.ia.Ia=2;this.ia.pb=a};function ic(a,b){this.width=a;this.height=b}ic.prototype.pa=function(){return this.width/this.height};ic.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};ic.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};function jc(a){return Math.floor(Math.random()*a)}function ab(a,b){var c=a%b;return c*b<0?c+b:c};function R(a,b){if(a instanceof R)this.o=a.o;else{var c;if(c=ca(a))a:{for(var d=c=0;d<a.length;d++){if(!ca(a[d])||c>0&&a[d].length!=c){c=r;break a}for(var e=0;e<a[d].length;e++)if(!y(a[d][e])){c=r;break a}if(c==0)c=a[d].length}c=c!=0}if(c)this.o=Ga(a);else if(a instanceof ic)this.o=kc(a.height,a.width);else if(y(a)&&y(b)&&a>0&&b>0)this.o=kc(a,b);else i(Error("Invalid argument(s) for Matrix contructor"))}this.i=new ic(this.o[0].length,this.o.length)}
function lc(){for(var a=[],b=0;b<4;b++){a[b]=[];for(var c=0;c<4;c++)a[b][c]=b==c?1:0}return new R(a)}function mc(a,b,c){for(var d=0;d<a.i.height;d++)for(var e=0;e<a.i.width;e++)b.call(c,a.o[d][e],d,e,a)}function nc(a,b){var c=new R(a.i);mc(a,function(d,e,f){c.o[e][f]=b.call(void 0,d,e,f,a)});return c}function kc(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}function oc(a){var b=new R(a.i.width,a.i.height);mc(a,function(c,d,e){b.o[e][d]=c});return b}
function pc(a,b,c){if(!(b>=0&&b<a.i.height&&c>=0&&c<a.i.width))return l;return a.o[b][c]}R.prototype.multiply=function(a){if(a instanceof R){this.i.width!=a.i.height&&i(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns."));return qc(this,a)}else if(y(a))return rc(this,a);else i(Error("A matrix can only be multiplied by a number or another matrix."))};
function qc(a,b){var c=new R(a.i.height,b.i.width);mc(c,function(d,e,f){for(var g=d=0;g<this.i.width;g++)d+=pc(this,e,g)*pc(b,g,f);e>=0&&e<c.i.height&&f>=0&&f<c.i.width||i(Error("Index out of bounds when setting matrix value, ("+e+","+f+") in size ("+c.i.height+","+c.i.width+")"));c.o[e][f]=d},a);return c}function rc(a,b){return nc(a,function(c){return c*b})};function sc(a,b,c){function d(h,m){try{var k=h.getContext(m);if(k!=l)return k}catch(p){}return l}for(var e=l,f=["webgl","experimental-webgl"],g=0;v(e)&&g<f.length;++g)e=e||d(a,f[g]);if(v(e))c!==undefined?c():i(Error("unable to get a valid WebGL context"));e.enable(e.CULL_FACE);e.cullFace(e.BACK);e.clearColor(0,0,0,0);e.clearDepth(1);e.enable(e.DEPTH_TEST);e.depthFunc(e.LEQUAL);this.canvas=a;this.Ea=b||l;this.c=e;this.Y=a.width;this.X=a.height;e.viewport(0,0,this.Y,this.X);this.na=this.Ca=0;this.ma=
1;this.pa=this.Y/this.X;this.qb=lc();this.G=lc();this.Fa=this.ra=this.Ja=this.Va=this.Da=0;H(t,"resize",this.Qa,r,this)}function tc(a){a.Ca=50*Math.PI/180;a.na=1.0E-6;a.ma=5;a.pa=a.Y/a.X;uc(a)}function uc(a){var b=1/Math.tan(a.Ca/2);a.qb=new R([[b/a.pa,0,0,0],[0,b,0,0],[0,0,(a.ma+a.na)/(a.na-a.ma),2*a.ma*a.na/(a.na-a.ma)],[0,0,-1,0]])}
sc.prototype.Qa=function(){this.Y=this.canvas.width=this.canvas.clientWidth;this.X=this.canvas.height=this.canvas.clientHeight;this.c.viewport(0,0,this.Y,this.X);this.pa=this.Y/this.X;uc(this);vc(this.b)};sc.prototype.translate=function(a,b,c){this.G=this.G.multiply(new R([[1,0,0,a],[0,1,0,b],[0,0,1,c],[0,0,0,1]]))};sc.prototype.b=l;function wc(a){var b;b=(b=a.className)&&typeof b.split=="function"?b.split(/\s+/):[];var c;c=Ia(arguments,1);for(var d=0,e=0;e<c.length;e++)if(!(ya(b,c[e])>=0)){b.push(c[e]);d++}c=d==c.length;a.className=b.join(" ");return c};var xc=!K||zb("9");K&&zb("9");function yc(a,b){ma(b,function(c,d){if(d=="style")a.style.cssText=c;else if(d=="class")a.className=c;else if(d=="for")a.htmlFor=c;else if(d in zc)a.setAttribute(zc[d],c);else a[d]=c})}var zc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function S(){var a=arguments,b=a[0],c=a[1];if(!xc&&c&&(c.name||c.type)){b=["<",b];c.name&&b.push(' name="',qa(c.name),'"');if(c.type){b.push(' type="',qa(c.type),'"');var d={};pa(d,c);c=d;delete c.type}b.push(">");b=b.join("")}b=document.createElement(b);if(c)if(x(c))b.className=c;else w(c)?wc.apply(l,[b].concat(c)):yc(b,c);a.length>2&&Ac(document,b,a,2);return b}
function Ac(a,b,c,d){function e(g){if(g)b.appendChild(x(g)?a.createTextNode(g):g)}for(;d<c.length;d++){var f=c[d];ca(f)&&!(ea(f)&&f.nodeType>0)?za(Bc(f)?Ga(f):f,e):e(f)}}function T(a){Ac(Cc(a),a,arguments,1)}function Cc(a){return a.nodeType==9?a:a.ownerDocument||a.document}function Bc(a){if(a&&typeof a.length=="number")if(ea(a))return typeof a.item=="function"||typeof a.item=="string";else if(da(a))return typeof a.item=="function";return r};function Dc(a,b,c){c=a.c.createShader(c);a.c.shaderSource(c,b);a.c.compileShader(c);a.c.getShaderParameter(c,a.c.COMPILE_STATUS)||i(Error("Shader err: "+a.c.getShaderInfoLog(c)));return c};function Ec(a,b){var c=b.c;this.v=a;this.Ab=c.getAttribLocation(this.v,"aVertexPosition");c.enableVertexAttribArray(this.Ab);this.ub=c.getAttribLocation(this.v,"aTextureCoord");c.enableVertexAttribArray(this.ub);this.Pb=U(c,this.v,"uMVPMatrix");this.ac=U(c,this.v,"uTileBuffer");this.Nb=U(c,this.v,"uMetaBuffer");this.ec=U(c,this.v,"uTileSize");this.gc=U(c,this.v,"uZoomLevel");this.bc=U(c,this.v,"uTileCount");this.Rb=U(c,this.v,"uOffset")}
function U(a,b,c){a=a.getUniformLocation(b,c);if(v(a))i(Error("Invalid name"));else return a};var Fc={};Fc["fs.glsl"]="#define BUFF_W %BUFFER_WIDTH_FLOAT%\n#define BUFF_H %BUFFER_HEIGHT_FLOAT%\nprecision mediump float;varying vec2 vTile;varying vec2 vTC;uniform sampler2D uTileBuffer;uniform float uTileSize;void main(){vec2 TC=clamp(vTC*uTileSize,0.5,uTileSize-0.5);vec2 BC=(vTile+(TC/uTileSize));gl_FragColor=texture2D(uTileBuffer,vec2(BC.s/BUFF_W,BC.t/BUFF_H));}";Fc["vs.glsl"]="#define BUFF_W %BUFFER_WIDTH_FLOAT%\n#define BUFF_H %BUFFER_HEIGHT_FLOAT%\n#define BUFF_SIZE %BUFFER_SIZE_INT%\n#define BINARY_SEARCH_CYCLES %BINARY_SEARCH_CYCLES_INT%\n#define LOOKUP_LEVELS %LOOKUP_LEVELS_INT%\nprecision highp float;const float PI=3.1415927;const float PI2=6.2831855;const float MAX_PHI=1.4844222;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVPMatrix;uniform float uZoomLevel;uniform float uTileCount;uniform vec2 uOffset;uniform vec4 uMetaBuffer[BUFF_SIZE];varying vec2 vTile;varying vec2 vTC;float compareMeta(in vec3 a, in vec3 b){  vec3 c=a-b;  return bool(c.x)?c.x:(bool(c.y)?c.y:c.z);}void main(void) {vec2 phi=PI2*vec2(aVertexPosition.x,aVertexPosition.y+uOffset.y)/uTileCount;if(abs(phi.x)>PI) phi.x=PI;%VERTEX_TRANSFORM%float tilex=mod(aVertexPosition.x-aTextureCoord.x+uOffset.x+uTileCount*0.5,uTileCount);float tiley=aTextureCoord.y-1.0-aVertexPosition.y-uOffset.y+uTileCount*0.5;vec2 off=vec2(0.0,0.0);vec3 key=vec3(uZoomLevel,tilex,tiley);const float last=float(BUFF_SIZE)-1.0;float lastZoomLevel=max(0.0,uZoomLevel-float(LOOKUP_LEVELS)+1.0);int mid=1;float min=0.0,max=last;for (int _i=0;_i<BINARY_SEARCH_CYCLES*LOOKUP_LEVELS;++_i) {if (min>max){if (key.r<=lastZoomLevel) break;key.r--;min=0.0;max=last;off.x=off.x*0.5+mod(key.g,2.0);off.y=off.y*0.5+1.0-mod(key.b,2.0);key.gb=floor(key.gb/2.0);}mid=int((min+max)*0.5);float res=compareMeta(uMetaBuffer[mid].xyz,key);if (res>0.0){max=float(mid)-1.0;} else if (res<0.0){min=float(mid)+1.0;} else {break;}}if (compareMeta(uMetaBuffer[mid].xyz,key)==0.0) {float i=uMetaBuffer[mid].a;float reduction=exp2(uZoomLevel-key.r);vTile.x=mod(i,BUFF_W);vTile.y=floor(i/BUFF_W);vTC.x=off.x*0.5+(aTextureCoord.x)/reduction;vTC.y=off.y*0.5+(aTextureCoord.y)/reduction;return;}vTile=vec2(0.0,0.0);vTC=vec2(0.0,0.0);if ((abs(phi.y)-MAX_PHI)>0.01)vTC=vec2(0.5,0.5);}";function Gc(a){if(a in Fc)a=Fc[a];else{var b=new XMLHttpRequest;b.open("GET","../we/shaders/"+a,r);b.send(l);a=b.responseText}return a};function Hc(a){this.b=a;this.Na=l;var b={width:this.b.j.Z,height:this.b.j.ya};a=this.b.a.c;var c=Gc("fs.glsl");c=c.replace("%BUFFER_WIDTH_FLOAT%",b.width.toFixed(1));c=c.replace("%BUFFER_HEIGHT_FLOAT%",b.height.toFixed(1));var d=Gc("vs.glsl");d=d.replace("%VERTEX_TRANSFORM%",this.Bb);d=d.replace("%BUFFER_WIDTH_FLOAT%",b.width.toFixed(1));d=d.replace("%BUFFER_HEIGHT_FLOAT%",b.height.toFixed(1));d=d.replace("%BUFFER_SIZE_INT%",(b.width*b.height).toFixed(0));d=d.replace("%BINARY_SEARCH_CYCLES_INT%",
(Math.log(b.width*b.height)/Math.LN2).toFixed(0));d=d.replace("%LOOKUP_LEVELS_INT%",(Ic+1).toFixed(0));b=Dc(this.b.a,c,a.FRAGMENT_SHADER);d=Dc(this.b.a,d,a.VERTEX_SHADER);c=a.createProgram();a.attachShader(c,d);a.attachShader(c,b);a.linkProgram(c);a.getProgramParameter(c,a.LINK_STATUS)||i(Error("Could not initialise shaders"));this.Na=new Ec(c,this.b.a)}Hc.prototype.Bb="";function V(a){this.u=Ib?[]:"";a!=l&&this.append.apply(this,arguments)}V.prototype.fa=function(a){this.clear();this.append(a)};if(Ib){V.prototype.za=0;V.prototype.append=function(a,b){if(b==l)this.u[this.za++]=a;else{this.u.push.apply(this.u,arguments);this.za=this.u.length}return this}}else V.prototype.append=function(a,b){this.u+=a;if(b!=l)for(var c=1;c<arguments.length;c++)this.u+=arguments[c];return this};V.prototype.clear=function(){if(Ib)this.za=this.u.length=0;else this.u=""};
V.prototype.toString=function(){if(Ib){var a=this.u.join("");this.clear();a&&this.append(a);return a}else return this.u};function W(a){this.name=a||"OpenStreetMaps"}D(W,Ra);W.prototype.sa=aa(18);W.prototype.R=aa(256);W.prototype.ua=function(a,b,c){var d=["a","b","c"];return(new V("http://",d[jc(d.length)],".tile.openstreetmap.org/",a,"/",b,"/",c,".png")).toString()};W.prototype.oa=function(a){T(a,"\u00a9 ",S("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA")};function Jc(){W.call(this,"MapQuest OSM")}D(Jc,W);Jc.prototype.ua=function(a,b,c){return(new V("http://otile",1+jc(3),".mqcdn.com/tiles/1.0.0/osm/",a,"/",b,"/",c,".png")).toString()};Jc.prototype.oa=function(a){T(a,"Map data \u00a9 ",S("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA",S("br"));T(a,"Tiles Courtesy of ",S("a",{href:"http://open.mapquest.co.uk/"},"MapQuest")," ",S("img",{src:"http://developer.mapquest.com/content/osm/mq_logo.png",border:0}))};function Kc(a){Hc.call(this,a)}D(Kc,Hc);Kc.prototype.Bb="float exp_2y=exp(2.0*phi.y);float tanh=((exp_2y-1.0)/(exp_2y+1.0));float cosy=sqrt(1.0-tanh*tanh);gl_Position=uMVPMatrix*vec4(sin(phi.x)*cosy,tanh,cos(phi.x)*cosy,1.0);";var Ic=5;
function Lc(a,b,c,d,e,f,g){this.a=a;this.hb=b||l;this.V=c||document.createElement("div");if(c===undefined){b=this.a.canvas;b.parentNode&&b.parentNode.insertBefore(this.V,b.nextSibling)}this.la=d||document.createElement("img");if(d===undefined){d=this.V;d.parentNode&&d.parentNode.insertBefore(this.la,d.nextSibling)}this.Cb=g||l;this.k=e||new Jc;this.j=new Wa(this.k,a,8,8);this.qa(this.k);this.zb=new G(150);H(this.zb,Ta,A(this.fc,this));this.zb.start();this.Sa=0;vc(this);this.n=0;this.t=1;this.longitude=
this.latitude=this.bb=0;this.N=f||new Kc(this);this.sb=[new hc(a,1,1,1),new hc(a,4,4,16),new hc(a,6,6,8),new hc(a,8,8,8),new hc(a,10,10,8),new hc(a,10,10,2)];X(this,3)}function Mc(a,b,c){a.latitude=Math.min(Math.max(b,-89),89)*Math.PI/180;a.longitude=c*Math.PI/180}
Lc.prototype.yb=function(){if(!v(this.V)){for(var a=this.V,b;b=a.firstChild;)a.removeChild(b);T(this.V,this.Cb);this.k.oa(this.V)}if(!v(this.la))if(v(this.k.Ga()))this.la.style.visibility="hidden";else{this.la.src=this.k.Ga();this.la.style.visibility="visible"}};Lc.prototype.qa=function(a){this.k=a;this.j.qa(this.k);this.k.Ya=A(this.yb,this);X(this,this.n);vc(this);this.yb()};function vc(a){a.Sa=0.7*a.a.canvas.height/a.k.R()}
function X(a,b){a.n=Math.min(Math.max(b,Math.max(1,a.k.ta())),a.k.sa());a.t=1<<Math.floor(a.n)}
Lc.prototype.fc=function(){function a(f,g,h,m,k,p){for(var n=-h;n<=h;n++){var o=Math.abs(n);I(p.j,m,f+n,g-h,k-o);I(p.j,m,f+n,g+h,k-o);if(o!=h){I(p.j,m,f-h,g+n,k-o);I(p.j,m,f+h,g+n,k-o)}}}for(var b={x:Math.floor(this.longitude/(2*Math.PI)*this.t)+this.t/2,y:this.t-1-(Math.floor(Math.log(Math.tan(this.latitude/2+Math.PI/4))/(Math.PI*2)*this.t)+this.t/2)},c=Math.floor(this.n),d=B(),e=1;e<=Ic;e++)I(this.j,c-e,b.x>>e,b.y>>e,d+e,e>4);a(b.x>>1,b.y>>1,1,c-1,d,this);I(this.j,c,b.x,b.y,d+3);a(b.x,b.y,1,c,d+
2,this);a(b.x,b.y,2,c,d-5,this);bb(this.j);cb(this.j)};function Nc(a,b,c,d,e,f,g){this.name=a;this.url=b;this.Ob=c;this.Mb=d;this.dc=e;this.Ib=f===j;this.Ra=g||[]}D(Nc,Ra);Nc.prototype.ta=function(){return this.Ob};Nc.prototype.sa=function(){return this.Mb};Nc.prototype.R=function(){return this.dc};Nc.prototype.ua=function(a,b,c){var d=this.url.replace("{z}",a.toFixed(0));d=d.replace("{x}",b.toFixed(0));d=d.replace("{y}",(this.Ib?(1<<a)-c-1:c).toFixed(0));if(this.Ra.length>0)d=d.replace("{sub}",this.Ra[jc(this.Ra.length)]);return d};function Oc(){var a=arguments,b=a.length;return function(){for(var c,d=0;d<b;d++)c=a[d].apply(this,arguments);return c}};function Pc(a,b){var c;this.name="Bing Maps - "+a;var d="bingsCallback_"+a;c="http://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+a+"?key="+b+"&jsonp="+d;t[d]=t[d]!==undefined?Oc(A(this.tb,this),t[d]):A(this.tb,this);d=document.createElement("script");d.src=c;d.type="text/javascript";c=document;var e="head".toUpperCase();c=c.querySelectorAll&&c.querySelector&&(!nb||document.compatMode=="CSS1Compat"||zb("528"))&&e?c.querySelectorAll(e+""):c.getElementsByTagName(e||"*");c[0].appendChild(d)}
D(Pc,Ra);s=Pc.prototype;s.tb=function(a){this.da=a;if(a.resourceSets.length>0)this.w=a.resourceSets[0].resources[0];this.Ya()};s.ta=function(){return v(this.w)?0:this.w.zoomMin};s.sa=function(){return v(this.w)?18:this.w.zoomMax};s.R=aa(256);function Qc(a,b,c){for(var d="",e=1;e<=a;e++)d+=(c>>a-e&1)<<1|b>>a-e&1;return d}s.ua=function(a,b,c){return v(this.w)?"":this.w.imageUrl.replace("{subdomain}",this.w.imageUrlSubdomains[jc(this.w.imageUrlSubdomains.length)]).replace("{quadkey}",Qc(a,b,c))};
s.Ma=function(a){return v(this.w)?r:Pc.J.Ma.call(this,a)};s.oa=function(a){v(this.da)||T(a,this.da.copyright)};s.Ga=function(){if(!v(this.da))return this.da.brandLogoUri;return l};s.da=l;s.w=l;var Rc=new Na;function Sc(a,b){var c=a;if(b!=l&&b.length>0)c+=b[0];var d;switch(a){case "mapquest":d=Jc;break;case "osm":d=W;break;case "bing":d=Pc;break;case "custom":d=Nc;break;default:alert("Unknown MapType '"+a+"' !");return}d=function(e,f){function g(h){e.apply(this,h)}g.prototype=e.prototype;return new g(f)}(d,b);Rc.fa(c,d)}function Tc(a,b){var c=a;if(b!=l)c+=b;return Qa(Rc,c)};new N(0,100);function Uc(){}(function(a){a.Jb=function(){a.Lb||(a.Lb=new a)}})(Uc);Uc.Jb();function Vc(a,b,c,d){if(!w(a)||!w(b))i(Error("Start and end parameters must be arrays"));a.length!=b.length&&i(Error("Start and end points must be the same length"));this.ha=a;this.Hb=b;this.duration=c;this.Ua=d;this.coords=[]}D(Vc,fc);var Y={},Z=l;function Wc(){gc.clearTimeout(Z);var a=B(),b;for(b in Y)Xc(Y[b],a);Z=na(Y)?l:gc.setTimeout(Wc,20)}function Yc(a){a=z(a);delete Y[a];if(Z&&na(Y)){gc.clearTimeout(Z);Z=l}}s=Vc.prototype;s.z=0;s.fb=0;s.l=0;s.startTime=l;s.eb=l;s.Ka=l;
s.play=function(a){if(a||this.z==0){this.l=0;this.coords=this.ha}else if(this.z==1)return r;Yc(this);this.startTime=B();if(this.z==-1)this.startTime-=this.duration*this.l;this.eb=this.startTime+this.duration;this.Ka=this.startTime;this.l||$(this,"begin");$(this,"play");this.z==-1&&$(this,"resume");this.z=1;a=z(this);a in Y||(Y[a]=this);Z||(Z=gc.setTimeout(Wc,20));Xc(this,this.startTime);return j};s.stop=function(a){Yc(this);this.z=0;if(a)this.l=1;Zc(this,this.l);$(this,"stop");$(this,"end")};
s.f=function(){this.z!=0&&this.stop(r);$(this,"destroy");Vc.J.f.call(this)};function Xc(a,b){a.l=(b-a.startTime)/(a.eb-a.startTime);if(a.l>=1)a.l=1;a.fb=1E3/(b-a.Ka);a.Ka=b;da(a.Ua)?Zc(a,a.Ua(a.l)):Zc(a,a.l);if(a.l==1){a.z=0;Yc(a);$(a,"finish");$(a,"end")}else a.z==1&&$(a,"animate")}function Zc(a,b){a.coords=Array(a.ha.length);for(var c=0;c<a.ha.length;c++)a.coords[c]=(a.Hb[c]-a.ha[c])*b+a.ha[c]}function $(a,b){a.dispatchEvent(new $c(b,a))}
function $c(a,b){L.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.kc=b.coords[2];this.duration=b.duration;this.l=b.l;this.Da=b.fb;this.state=b.z;this.hc=b}D($c,L);function ad(a){return 1-Math.pow(1-a,3)};function bd(a){this.h=a;this.Ba=r;this.db=this.cb=this.I=this.H=0;this.q=l;this.Aa=new G(25);this.M=l;H(this.h.a.canvas,"mousedown",A(this.Tb,this));H(Cc(this.h.a.canvas),"mouseup",A(this.Vb,this));H(this.Aa,Ta,this.Sb,r,this)}s=bd.prototype;s.Tb=function(a){if(Fb(a,0)){if(this.M){this.M.stop(r);this.M.C();this.M=l}this.Ba=j;this.H=a.screenX;this.I=a.screenY;if(!v(this.q)){Q(this.q);this.q=l}this.q=H(Cc(this.h.a.canvas),"mousemove",A(this.Ub,this));a.preventDefault()}};
s.Vb=function(a){if(this.Ba&&(a.type!="mousedown"||Fb(a,0))){this.cb=a.screenX;this.db=a.screenY;a.preventDefault();this.Aa.start()}};function cd(a,b,c){var d=Math.PI*(1/a.h.a.canvas.height)*(a.h.Sa/Math.pow(2,a.h.n));a.h.longitude-=b*2*d;a.h.latitude+=c*d;if(Math.abs(a.h.latitude)>Math.PI/2.1)a.h.latitude=(a.h.latitude==0?0:a.h.latitude<0?-1:1)*(Math.PI/2.1);if(a.h.longitude>Math.PI)a.h.longitude-=2*Math.PI;if(a.h.longitude<-Math.PI)a.h.longitude+=2*Math.PI}
s.Ub=function(a){cd(this,a.screenX-this.H,a.screenY-this.I);this.H=a.screenX;this.I=a.screenY;a.preventDefault()};s.Sb=function(){this.Aa.stop();this.Ba=r;if(!v(this.q)){Q(this.q);this.q=l}var a=this.H-this.cb,b=this.I-this.db,c=Math.sqrt(Math.pow(a,2)+Math.pow(b,2));if(c>6){var d=Math.max(15,c)*8;this.M=new Vc([this.H,this.I],[this.H+d*(a/c),this.I+d*(b/c)],1300,ad);H(this.M,["animate"],this.Kb,r,this);this.M.play(r)}};s.Kb=function(a){cd(this,a.x-this.H,a.y-this.I);this.H=a.x;this.I=a.y};function dd(a){this.Gb=a;this.q=H(this.Gb,mb?"DOMMouseScroll":"mousewheel",this)}D(dd,fc);
dd.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Q;if(a.type=="mousewheel"){c=1;if(K||nb&&(qb||zb("532.0")))c=40;d=nb&&hb&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;if(a.wheelDeltaX!==undefined){b=nb&&hb&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c;c=nb&&hb&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c}else c=d}else{d=a.detail;if(d>100)d=3;else if(d<-100)d=-3;if(a.axis!==undefined&&a.axis===a.HORIZONTAL_AXIS)b=d;else c=d}if(y(this.lb))b=Math.min(Math.max(b,-this.lb),
this.lb);if(y(this.mb))c=Math.min(Math.max(c,-this.mb),this.mb);b=new ed(d,a,b,c);try{this.dispatchEvent(b)}finally{b.C()}};dd.prototype.f=function(){dd.J.f.call(this);Q(this.q);delete this.q};function ed(a,b,c,d){b&&this.$(b,void 0);this.type="mousewheel";this.detail=a;this.ic=c;this.Fb=d}D(ed,M);function fd(a){this.nb=new dd(a.a.canvas);this.q=H(this.nb,"mousewheel",A(function(b){X(this,this.n-b.Fb/12);b.preventDefault()},a));this.Eb=H(a.a.canvas,"dblclick",A(function(b){X(this,Math.floor(this.n+1));b.preventDefault()},a));this.Xb=H(a.a.canvas,"mouseup",A(function(b){if(Fb(b,2)){b.preventDefault();X(this,Math.ceil(this.n-1))}},a));this.Qb=H(a.a.canvas,"contextmenu",function(b){b.preventDefault()})}D(fd,E);fd.prototype.f=function(){Q(this.q);Q(this.Eb);Q(this.Xb);Q(this.Qb);this.nb.C()};function gd(a,b){var c=x(a)?document.getElementById(a):a;if(!v(c)){var d=S("canvas",{style:"width:100%;height:100%;"});this.a=new sc(d,l,function(){var g=S("a",{style:"font-size:110%;display:block;width:100%;top:50%;position:relative;text-align:center;color:#800000;text-shadow:rgba(0,0,0,0.4) 0 0 6px;",href:"http://www.webglearth.com/upgrade.html"},"You need a WebGL-enabled browser to run this application.");T(c,g)});if(this.a!=l){tc(this.a);var e=S("div",{style:"width:100%;height:100%;position:relative;"});
T(c,e);T(e,d);Sc("mapquest");Sc("osm");this.jb=new G(15);H(this.jb,Ta,A(function(){var g=this.a,h=g.c,m;if(!v(g.Ea)){m=B();if(g.Ja<B()-2E3){g.Da=1E3*g.ra/(B()-g.Ja);g.Va=g.Fa/g.ra;g.Ja=B();g.ra=0;g.Fa=0;g.Ea.innerHTML=g.Va.toFixed(2)+" ms / fps: "+g.Da.toFixed(2)}g.ra++}h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);g.G=lc();h=g.b;var k=h.a.c;if(!v(h.hb))h.hb.innerHTML=(h.latitude*180/Math.PI).toFixed(4)+"; "+(h.longitude*180/Math.PI).toFixed(4)+" @ "+h.n.toFixed(2)+"; BufferQueue size: "+h.j.p.length+
"; Currently loading tiles: "+h.k.ba+"; LoadQueue size: "+h.j.K.r.length+"; Cache size: "+h.j.K.F.d;h.bb=1/Math.tan(h.N.b.a.Ca/2)*(Math.cos(Math.abs(h.N.b.latitude))*2*Math.PI/Math.pow(2,h.N.b.n)*h.N.b.Sa/2);var p=h.N;p.b.a.translate(0,0,-1-p.b.bb);var n=p.b.a,o=p.b.latitude,q=Math.cos(o);o=Math.sin(o);n.G=n.G.multiply(new R([[1,0,0,0],[0,q,-o,0],[0,o,q,0],[0,0,0,1]]));n=p.b.a;q=-ab(p.b.longitude/(2*Math.PI)*p.b.t,1)/p.b.t*2*Math.PI;p=Math.cos(q);q=Math.sin(q);n.G=n.G.multiply(new R([[p,0,q,0],[0,
1,0,0],[-q,0,p,0],[0,0,0,1]]));k.useProgram(h.N.Na.v);p=h.N.Na;k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,h.j.P);k.uniform1i(p.ac,0);n=Ma(h.j.ca);k.uniform4fv(p.Nb,new Float32Array(n));o=h.a;n=Float32Array;q=Ma;o=oc(o.qb.multiply(o.G));n=new n(q(o.o));q=h.sb[Math.min(Math.floor(h.n),h.sb.length-1)];k.bindBuffer(k.ARRAY_BUFFER,q.W);k.vertexAttribPointer(p.Ab,q.W.Ia,k.FLOAT,r,0,0);k.bindBuffer(k.ARRAY_BUFFER,q.ia);k.vertexAttribPointer(p.ub,q.ia.Ia,k.FLOAT,r,0,0);k.uniformMatrix4fv(p.Pb,
r,n);k.uniform1f(p.ec,h.k.R());k.uniform1f(p.gc,Math.floor(h.n));k.uniform1f(p.bc,h.t);k.uniform2fv(p.Rb,[Math.floor(h.longitude/(2*Math.PI)*h.t),Math.floor(Math.log(Math.tan(h.latitude/2+Math.PI/4))/(Math.PI*2)*h.t)]);k.drawArrays(k.TRIANGLES,0,q.W.pb);v(g.Ea)||(g.Fa+=B()-m)},this));d=S("img",{style:"position:absolute;bottom:0;right:0"});var f=S("div",{style:"position:absolute;bottom:5px;left:5px;width:75%;font-size:8px;text-align:justify;color:#fff;font-family:Verdana,Arial;text-shadow:rgba(0,0,0,0.8) 0 0 4px;"});
T(e,d);T(e,f);this.a.b=new Lc(this.a,undefined,f,d,b!==undefined&&"map"in b?Tc(b.map):undefined,undefined,S("p",l,"Powered by ",S("a",{href:"http://www.webglearth.org/",style:"color:#00f"},"WebGL Earth"),"."));b!==undefined&&"zoom"in b&&X(this.a.b,b.zoom);b!==undefined&&"center"in b&&Mc(this.a.b,b.center[0],b.center[1]);this.jc=new bd(this.a.b);this.lc=new fd(this.a.b);this.a.Qa();this.jb.start()}}}gd.prototype.Yb=function(a,b){var c=Tc(a,b);c!=l&&this.a.b.qa(c)};C("WebGLEarth",gd);C("WebGLEarth.prototype.setZoom",function(a){X(this.a.b,a)});C("WebGLEarth.prototype.getZoom",function(){return this.a.b.n});C("WebGLEarth.prototype.setCenter",function(a){Mc(this.a.b,a[0],a[1])});C("WebGLEarth.prototype.getCenter",function(){return[this.a.b.latitude*180/Math.PI,this.a.b.longitude*180/Math.PI]});C("WebGLEarth.prototype.handleResize",function(){return this.a.Qa()});C("WebGLEarth.Maps",{MAPQUEST:"mapquest",OSM:"osm",BING:"bing",CUSTOM:"custom"});
C("WebGLEarth.prototype.initMap",Sc);C("WebGLEarth.prototype.setMap",gd.prototype.Yb);